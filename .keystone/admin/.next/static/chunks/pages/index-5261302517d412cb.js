(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8023:function(e,t,i){"use strict";i.d(t,{H:function(){return p},P:function(){return PageContainer}});var r=i(7896),n=i(5445),o=i(2784),a=i(3818),l=i(5632);i(5631),i(487),i(891),i(5273);var s=i(5360),d=i(1511),g=i(6987),c=i(9097),u=i.n(c);let Logo=()=>{var e;let{spacing:t}=(0,n.Fg)(),{adminConfig:i}=(0,s.jf)();return null!==(e=i.components)&&void 0!==e&&e.Logo?(0,n.tZ)(i.components.Logo,null):(0,n.tZ)(n.H3,null,(0,n.tZ)(u(),{href:"/",css:{backgroundImage:"linear-gradient(to right, #0ea5e9, #6366f1)",backgroundClip:"text",lineHeight:"1.75rem",color:"transparent",verticalAlign:"middle",transition:"color 0.3s ease",textDecoration:"none"}},(0,n.tZ)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 220 220",css:{display:"inline-block",width:"2rem",height:"2rem",margin:`0  ${t.medium}px ${t.xsmall}px 0`,verticalAlign:"middle"}},(0,n.tZ)("defs",null,(0,n.tZ)("linearGradient",{id:"logo-a",x1:"0%",x2:"50%",y1:"0%",y2:"71.9%"},(0,n.tZ)("stop",{offset:"0%",stopColor:"#5AE8FA"}),(0,n.tZ)("stop",{offset:"100%",stopColor:"#2684FF"}))),(0,n.tZ)("path",{fill:"url(#logo-a)",fillRule:"evenodd",d:"M290.1 47h117.5c17.8 0 24.3 1.9 30.8 5.3a36.3 36.3 0 0115.1 15.2c3.5 6.5 5.4 13 5.4 30.8v117.4c0 17.9-1.9 24.3-5.4 30.8a36.3 36.3 0 01-15.1 15.2c-6.5 3.4-13 5.3-30.8 5.3H290c-17.8 0-24.3-1.9-30.8-5.3a36.3 36.3 0 01-15.1-15.2c-3.5-6.5-5.3-13-5.3-30.8V98.3c0-17.9 1.8-24.3 5.3-30.8a36.3 36.3 0 0115.1-15.2c6.5-3.4 13-5.3 30.8-5.3zm11.8 56.8V218H327v-36.8l14.4-14.6 34.4 51.4h31.5l-49-69.1 44.7-45.1h-31.3L327 151v-47.3H302z",transform:"translate(-238.9 -47)"})),"Keystone 6"))},NavItem=({href:e,children:t,isSelected:i})=>{let{colors:r,palette:o,spacing:a,radii:s,typography:g}=(0,n.Fg)(),c=(0,l.useRouter)(),u=void 0!==i?i:c.pathname===e;return(0,n.tZ)("li",null,(0,n.tZ)(d.rU,{"aria-current":!!u&&"location",href:e,css:{background:"transparent",borderBottomRightRadius:s.xsmall,borderTopRightRadius:s.xsmall,color:o.neutral700,display:"block",fontWeight:g.fontWeight.medium,marginBottom:a.xsmall,marginRight:a.xlarge,padding:`${a.small}px ${a.xlarge}px`,position:"relative",textDecoration:"none",":hover":{background:r.backgroundHover,color:r.linkHoverColor},"&[aria-current=location]":{background:o.neutral200,color:o.neutral900}}},t))},AuthenticatedItemDialog=({item:e})=>{let{apiPath:t}=(0,s.jf)(),{spacing:i,typography:r}=(0,n.Fg)();return(0,n.tZ)("div",{css:{alignItems:"center",display:"flex",flexDirection:"row",justifyContent:"space-between",margin:i.xlarge,marginBottom:0}},!!e&&"authenticated"===e.state&&(0,n.tZ)("div",{css:{fontSize:r.fontSize.small}},"Signed in as ",(0,n.tZ)("strong",{css:{display:"block"}},e.label)),e&&"authenticated"===e.state&&(0,n.tZ)(g.S,null))},NavigationContainer=({authenticatedItem:e,children:t})=>{let{spacing:i}=(0,n.Fg)();return(0,n.tZ)("div",{css:{display:"flex",flexDirection:"column",justifyContent:"center",position:"relative"}},(0,n.tZ)(AuthenticatedItemDialog,{item:e}),(0,n.tZ)("nav",{role:"navigation","aria-label":"Side Navigation",css:{marginTop:i.xlarge}},(0,n.tZ)("ul",{css:{padding:0,margin:0,li:{listStyle:"none"}}},t)))},ListNavItem=({list:e})=>{let t=(0,l.useRouter)();return(0,n.tZ)(NavItem,{isSelected:t.pathname.split("/")[1]===`/${e.path}`.split("/")[1],href:`/${e.path}${e.isSingleton?"/1":""}`},e.label)},ListNavItems=({lists:e=[],include:t=[]})=>{let i=t.length>0?e.filter(e=>t.includes(e.key)):e;return(0,n.tZ)(o.Fragment,null,i.map(e=>(0,n.tZ)(ListNavItem,{key:e.key,list:e})))},Navigation=()=>{var e;let{adminMeta:{lists:t},adminConfig:i,authenticatedItem:r,visibleLists:o}=(0,s.jf)();if("loading"===o.state)return null;if("error"===o.state)return(0,n.tZ)(n.xv,{as:"span",paddingLeft:"xlarge",css:{color:"red"}},o.error instanceof Error?o.error.message:o.error[0].message);let a=Object.keys(t).map(e=>o.lists.has(e)?t[e]:null).filter(e=>!!e);return null!=i&&null!==(e=i.components)&&void 0!==e&&e.Navigation?(0,n.tZ)(i.components.Navigation,{authenticatedItem:r,lists:a}):(0,n.tZ)(NavigationContainer,{authenticatedItem:r},(0,n.tZ)(NavItem,{href:"/"},"Dashboard"),(0,n.tZ)(ListNavItems,{lists:a}))},p=80,PageWrapper=e=>(0,n.tZ)(o.Fragment,null,(0,n.tZ)("style",null,"body { overflow: hidden; }"),(0,n.tZ)("div",(0,r.Z)({css:{display:"grid",gridTemplateColumns:"minmax(300px, 1fr)",gridTemplateRows:`repeat(2,${p}px) auto`,height:"100vh",isolation:"isolate","@media (min-width: 576px)":{gridTemplateColumns:"minmax(300px, 1fr) 4fr",gridTemplateRows:`${p}px auto`}}},e))),Sidebar=({isSidebarOpen:e,...t})=>(0,n.tZ)("div",{css:{gridColumn:"1/2",gridRow:"2/4",display:e?"block":"none",height:"100vh","@media (min-width: 576px)":{gridColumn:"1/2",gridRow:"2/3",display:"block",height:"100%"},overflowY:"auto",WebkitOverflowScrolling:"touch"}},(0,n.tZ)("aside",(0,r.Z)({css:{minWidth:0,WebkitOverflowScrolling:"touch"}},t))),Content=e=>{let{colors:t,spacing:i}=(0,n.Fg)();return(0,n.tZ)("main",(0,r.Z)({css:{backgroundColor:t.background,boxSizing:"border-box",minWidth:0,paddingLeft:i.xlarge,paddingRight:i.xlarge,overflowY:"auto",WebkitOverflowScrolling:"touch",position:"relative"}},e))},PageContainer=({children:e,header:t,title:i})=>{let{colors:r,spacing:l}=(0,n.Fg)(),[s,d]=(0,o.useState)(!1);return(0,n.tZ)(PageWrapper,null,(0,n.tZ)("div",{css:{alignItems:"center",borderBottom:`1px solid ${r.border}`,display:"flex",justifyContent:"space-between",paddingLeft:l.xlarge,paddingRight:l.xlarge}},(0,n.tZ)(Logo,null),(0,n.tZ)("div",{onClick:()=>{d(!s)},css:{display:"block","@media (min-width: 576px)":{display:"none"}}},s?(0,n.tZ)(a.oOx,null):(0,n.tZ)(a.Oqj,null))),(0,n.tZ)("header",{css:{alignItems:"center",backgroundColor:r.background,borderBottom:`1px solid ${r.border}`,display:"flex",justifyContent:"space-between",minWidth:0,paddingLeft:l.xlarge,paddingRight:l.xlarge,visibility:s?"hidden":"visible"}},(0,n.tZ)("title",null,i?`Keystone - ${i}`:"Keystone"),(0,n.tZ)("meta",{name:"viewport",content:"width=device-width, initial-scale=1.0"}),t),(0,n.tZ)(Sidebar,{isSidebarOpen:s},(0,n.tZ)(Navigation,null)),(0,n.tZ)(Content,null,e))}},5356:function(e,t,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return i(4643)}])},4643:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return HomePage}});var r=i(7896),n=i(2784),o=i(5445),a=i(8752),l=i(6759),s=i(1054);i(4163),i(928),i(9378);var d=i(8023),g=i(81),c=i(794),u=i(5360),p=i(1511);i(2445),i(5631),i(3818),i(5632),i(487),i(891),i(5273),i(6987),i(9097),i(5364),i(8999),i(6819),i(4002),i(9393),i(7668),i(1168),i(5976),i(581),i(6763),i(7729);let ListCard=({listKey:e,count:t,hideCreate:i})=>{let{colors:r,palette:n,radii:s,spacing:d}=(0,o.Fg)(),g=(0,u.sm)(e);return(0,o.tZ)("div",{css:{position:"relative"}},(0,o.tZ)(p.rU,{href:`/${g.path}${g.isSingleton?"/1":""}`,css:{backgroundColor:r.background,borderColor:r.border,borderRadius:s.medium,borderWidth:1,display:"inline-block",minWidth:280,padding:d.large,textDecoration:"none",":hover":{borderColor:n.blue400},":hover h3":{textDecoration:"underline"}}},(0,o.tZ)("h3",{css:{margin:`0 0 ${d.small}px 0`}},g.label," "),g.isSingleton?null:"success"===t.type?(0,o.tZ)("span",{css:{color:r.foreground,textDecoration:"none"}},t.count," item",1!==t.count?"s":""):"error"===t.type?t.message:"loading"===t.type?(0,o.tZ)(l.xg,{label:`Loading count of ${g.plural}`,size:"small",tone:"passive"}):"No access"),!1===i&&!g.isSingleton&&(0,o.tZ)(CreateButton,{title:`Create ${g.singular}`,href:`/${g.path}/create`},(0,o.tZ)(a.p,{size:"large"}),(0,o.tZ)(o.TX,null,"Create ",g.singular)))},CreateButton=e=>{let t=(0,o.Fg)();return(0,o.tZ)(p.rU,(0,r.Z)({css:{alignItems:"center",backgroundColor:t.palette.neutral400,border:0,borderRadius:t.radii.xsmall,color:"white",cursor:"pointer",display:"flex",height:32,justifyContent:"center",outline:0,position:"absolute",right:t.spacing.large,top:t.spacing.large,transition:"background-color 80ms linear",width:32,"&:hover, &:focus":{color:"white",backgroundColor:t.tones.positive.fill[0]}}},e))},HomePage=()=>{let{adminMeta:{lists:e},visibleLists:t}=(0,u.jf)(),i=(0,n.useMemo)(()=>g.Ps`
    query {
      keystone {
        adminMeta {
          lists {
            key
            hideCreate
          }
        }
      }
      ${Object.values(e).filter(e=>!e.isSingleton).map(e=>`${e.key}: ${e.gqlNames.listQueryCountName}`).join("\n")}
    }`,[e]),{data:r,error:a}=(0,c.a)(i,{errorPolicy:"all"}),p=(0,s.m)(r,null==a?void 0:a.graphQLErrors);return(0,o.tZ)(d.P,{header:(0,o.tZ)(o.X6,{type:"h3"},"Dashboard")},"loading"===t.state?(0,o.tZ)(o.M5,{css:{height:`calc(100vh - ${d.H}px)`}},(0,o.tZ)(l.xg,{label:"Loading lists",size:"large",tone:"passive"})):(0,o.tZ)(o.gF,{as:"ul",gap:"large",paddingY:"xlarge",css:{paddingLeft:"0px",marginBottom:"0px"}},"error"===t.state?(0,o.tZ)("span",{css:{color:"red"}},t.error instanceof Error?t.error.message:t.error[0].message):Object.keys(e).map(e=>{var i,n;if(!t.lists.has(e))return null;let a=p.get(e);return(0,o.tZ)(ListCard,{count:r?a.errors?{type:"error",message:a.errors[0].message}:{type:"success",count:r[e]}:{type:"loading"},hideCreate:null!==(i=null==r||null===(n=r.keystone.adminMeta.lists.find(t=>t.key===e))||void 0===n?void 0:n.hideCreate)&&void 0!==i&&i,key:e,listKey:e})})))}}},function(e){e.O(0,[888,774,179],function(){return e(e.s=5356)}),_N_E=e.O()}]);